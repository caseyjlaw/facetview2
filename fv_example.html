<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>FacetView</title>

  <script type="text/javascript" src="vendor/jquery/1.7.1/jquery-1.7.1.min.js"></script>

  <link rel="stylesheet" href="vendor/bootstrap/css/bootstrap.min.css">
  <script type="text/javascript" src="vendor/bootstrap/js/bootstrap.min.js"></script>  

  <link rel="stylesheet" href="vendor/jquery-ui-1.8.18.custom/jquery-ui-1.8.18.custom.css">
  <script type="text/javascript" src="vendor/jquery-ui-1.8.18.custom/jquery-ui-1.8.18.custom.min.js"></script>

  <!-- note that we require the es.js integration, the bootstrap2 facetview and the facetview core -->
  <script type="text/javascript" src="es.js"></script>
  <script type="text/javascript" src="bootstrap2.facetview.theme.js"></script>
  <script type="text/javascript" src="jquery.facetview2.js"></script>

  <link rel="stylesheet" href="css/facetview.css">

  <script type="text/javascript">
jQuery(document).ready(function($) {
    $('.facet-view-simple').each(function() {
        $(this).facetview({
            search_url : "http://localhost:9200/cand/_search",
            datatype : "json",
            default_freetext_fuzzify: "*",
            sort: [{"snr" : {"order" : "desc"}}],
            facets: [
                // {'field': 'snr', 'display': 'SNR', "type" : "range", "range" : [{"to" : 10, "display" : "less than £10"}, {"from" : 10, "to" : 20, "display" : "£10 - £20"}, {"from" : 20, "to" : 40, "display" : "£20 - £40"}, {"from" : 40, "display" : "£40+"}], "open" : true},
                // {'field' : 'integration', 'display' : 'integration', 'type' : 'geo_distance', 
                //     'unit' : 'mi', 'open' : true, "lat" : 51.533182, "lon" : -0.475996, 
                //     "distance" : [
                //     {"to" : 0.5, "display" : "within 0.5 miles"}, {"to" : 2, "display" : "within 2 miles"}, {"to" : 5, "display" : "within 5 miles"},
                //     {"to" : 10, "display" : "within 10 miles"}, {"to" : 20, "display" : "within 20 miles"}, {"to" : 50, "display" : "within 50 miles"}
                //     ]
                // },
                // {'field': 'subject.exact', 'display': 'Subject', "logic" : "OR", "open" : true, "value_function" :  function(value) {return value.toUpperCase() } },
                // {'field': 'condition.exact', 'display': 'Condition', "logic" : "AND"},
                // {'field': 'dm', 'display': 'Publication Year', "size" : 26},
                // {'field': 'edition.exact', 'display': 'Edition', "order" : "reverse_count", "open" : true},
                // {'field' : 'dt', 'display' : 'Inactive Visible', 'deactivate_threshold' : 2},
                // {'field' : 'segment', 'display' : 'segment'},
            ],
            default_facet_size: 11,
            // default_facet_operator: "AND",
            // default_facet_order: "term",
            include_facets_in_url:false,
            include_facets:true,
            // default_operator: "AND", 
            from: 0,
            search_sortby: [
                {'display':'snr',         'field':'snr'},
                {'display':'integration', 'field':'integration'},
                {'display':'segment',     'field':'segment'},
                {'display':'dm',          'field':'dm'},
                {'display':'dt',          'field':'dt'}
            ],
            searchbox_fieldselect: [
                {'display':'snr',         'field':'snr'},
                {'display':'integration', 'field':'integration'},
                {'display':'segment',     'field':'segment'},
                {'display':'dm',          'field':'dm'},
                {'display':'dt',          'field':'dt'}
            ],
            sharesave_link: true,
            search_button: true,
            debug: true,
            fields: ["obs", "snr", "scan", "candidate_png", "dm", "dt","integration", "segment"],
            render_results_metadata: pageSlider,
            "result_display" : 
              [
                [ { "pre":"<td><img width='200' src='http://www.aoc.nrao.edu/~claw/realfast/plots/cands_16A-456_Stest_14Apr2016.57496.71619041667_sc10-seg0-i462-dm6-dt0.png'>&nbsp; &nbsp; OBS: <strong>"
                    , "field": "obs", "post": "</strong></td>"},
                { "pre": "<td><ul><li>scan: <em>", "field": "scan", "post": "</em></li> "},
                { "pre": "<li>segment: <em>", "field": "segment", "post": "</em></li> " },
                { "pre": "<li>integration ", "field": "integration", "post": "</li>" },
                { "pre": "<li>dm: ", "field": "dm", "post": "</li>" },
                { "pre": "<li>dt: ", "field": "dt", "post": "</li></ul></td>"  },
                { "pre": "<td><b>snr: ", "field": "snr", "post":"</b></td>"}
                 ],
                  // {"pre" : "<img src='http://www.aoc.nrao.edu/~claw/realfast/plots/",
                        // "field": "candidate_png", "post" : "'/>')"} ],
              ],
            // selected_filters_in_facet: true,
            show_filter_field : true,
            show_filter_logic: true,
            //predefined_filters : {
            //    "subject.exact" : ["Medicine"]
            //},
            "pushstate" : false,
            exclude_predefined_filters_from_facets : false
        });
    });
});
  </script>

<style type="text/css">
.facet-view-simple{
    width:1170px;
    height:600px;
    margin:20px auto 0 auto;
}
</style>

</head>
<body>

    <div class="facet-view-simple"></div>

</body>
</html>
